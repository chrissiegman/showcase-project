{% extends 'base.html' %}

{% load staticfiles %}

{% block title %}FLAGSHIP{% endblock %}

{% block body_block %}

<canvas id="flagship" width=400 height=400 style="border:1px solid #000000;">
</canvas>

<script src="{% static 'javascript/key_listener.js'"></script>

<script>
    $(document).ready(function () { console.log('document is ready'); });
</script>


<script>

var canvas = document.getElementById("flagship");
var context = canvas.getContext("2d");

var player = {
    color: "#FF0000",
    x: 220,
    y: 270,
    width: 35,
    height: 35,
    draw: function() {
        context.fillStyle = this.color;
        context.fillRect(this.x, this.y, this.width, this.height);
        }
    };

var rightDown = false;
var leftDown = false;
var upDown = false;
var downDown = false;

function onKeyDown(event) {
    if (event.keyCode == 39) {
        rightDown = true;
        }
    else if (event.keyCode == 37) {
        leftDown = true;
        }
    else if (event.keyCode == 38) {
        upDown = true;
        }
    else if (event.keyCode == 40) {
        downDown = true;
        }
    }

function onKeyUp(event) {
    if (event.keyCode == 39) {
        rightDown = false;
        }
    else if (event.keyCode == 37) {
        leftDown = false;
        }
    else if (event.keyCode == 38) {
        upDown = false;
        }
    else if (event.keyCode == 40) {
        downDown = false;
        }
    }


$(document).keydown(onKeyDown);
$(document).keyup(onKeyUp);

function update() {
    if (rightDown) player.x += 4;
    else if (leftDown) player.x -= 4;
    else if (upDown) player.y -= 4;
    else if (downDown) player.y += 4;
    }


function draw() {
    context.clearRect(0, 0, 500, 500);
    player.draw();
}

var FPS = 30;
setInterval(function() {
    update();
    draw();
    }, 1000/FPS);

</script>



{% endblock %}
